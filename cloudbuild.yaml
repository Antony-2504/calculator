steps:
  # Clean npm cache
  - name: 'gcr.io/cloud-builders/npm'
    args: ['cache', 'clean', '--force']

  # Update npm
  - name: 'gcr.io/cloud-builders/npm'
    args: ['install', '-g', 'npm']

  # Build the ReactJS app
  - name: 'gcr.io/cloud-builders/npm'
    args: ['install']
    dir: '/'  # Set the working directory to the root of your project
  - name: 'gcr.io/cloud-builders/npm'
    args: ['run', 'build']
    dir: '/'  # Set the working directory to the root of your project

  # Copy the build artifact to the VM instance
  - name: 'gcr.io/cloud-builders/gcloud'
    entrypoint: 'bash'
    args:
      - '-c'
      - |
        gcloud compute scp --zone=us-central1-a --recurse /workspace/build/* antonyavanexa@instance-3:/var/test/
